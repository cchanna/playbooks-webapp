<div class="narrow" id="edit-vows">
  <h1>
    Edit Vows
  </h1>
  <%= form_for @character, url: {action: "update_vows"}, html: {remote: true, id: "edit-vows-form", class: "edit-character-form"} do |f| %>
    <div>
      <% DefVow.all.each do |v| %>
        <div class="check-title">
          <%= check_box_tag "def_vow_ids[#{v.id}]", v.id, class: "vow-checkbox" %>

          <%= label_tag "def_vow_ids_#{v.id}", v.name, class: "under-check" %>
          <% vow = Vow.find_by(character: @character, def_vow: v) %>
          <% detail = vow ? vow.detail : nil %>
          <div class="body">
            <%= v.text.gsub('_', text_field_tag("details[#{v.id}]", detail ? detail : "", class: "detail-body")).html_safe %>
          </div>
        </div>
      <% end %>
    </div>
    <div class="submit-wrapper">
      <%= f.submit ">", class: "submit" %>
    </div>
  <% end %>
</div>
