$("#fate<%=@fate.id%>_name-field").show();
$("#fate<%=@fate.id%>_name").hide()
autosize($('textarea'));
$('#overlay').show()

$('#fate<%=@fate.id%>_name-field').focus();
$('#fate<%=@fate.id%>_name-field').select();
$('#overlay').click( function() {
	save_data("#fate<%=@fate.id%>_name-field", "#fate<%=@fate.id%>_name");
	
	$('#overlay').hide();
	$("#fate<%=@fate.id%>_name").show();
	var value = $("#fate<%=@fate.id%>_name-field").val();
	if (value == "") {
		value = "(name)";
	}
	$("#fate<%=@fate.id%>_name").html(value);

	$("#fate<%=@fate.id%>_name-field").parents('form:first').submit();
	$("#fate<%=@fate.id%>_name-field").hide();

	$('#overlay').off("click");
});
